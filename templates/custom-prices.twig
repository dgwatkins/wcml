{% if is_variation %}
    <tr><td>
{% endif %}

<div class="wcml_custom_prices_block">
    {% if currencies is empty  %}
        <div class="custom_prices_message_block">
            <label>{{ strings.not_set }}</label>
        </div>
    {% else %}
        <div class="wcml_custom_prices_options_block">

            <input type="radio" name="_wcml_custom_prices[{{ product_id }}]" id="wcml_custom_prices_auto[{{ product_id }}]" value="0" class="wcml_custom_prices_input" {{ checked_calc_auto|raw }} />
            <label for="wcml_custom_prices_auto[{{ product_id }}]">{{ strings.calc_auto }}&nbsp;
                <span class="block_actions">(
                    <a href="" class="wcml_custom_prices_auto_block_show" title="{{ strings.see_prices|e }}">{{ strings.show }}</a>
                    <a href="" class="wcml_custom_prices_auto_block_hide">{{ strings.hide }}</a>
                )</span>
            </label>


            <input type="radio" name="_wcml_custom_prices[{{ product_id }}]" value="1" id="wcml_custom_prices_manually[{{ product_id }}]" class="wcml_custom_prices_input" {{ checked_calc_manually|raw }} />
            <label for="wcml_custom_prices_manually[{{ product_id }}]">{{ strings.set_manually }}</label>
            <div class="wcml_custom_prices_manually_block_control">
                <a {% if checked_calc_manually is not empty %} style="display:none" {% endif %} href="" class="wcml_custom_prices_manually_block_show">&raquo; {{ strings.enter_prices }}</a>
                <a style="display:none" href="" class="wcml_custom_prices_manually_block_hide">- {{ strings.hide_prices }}</a>
            </div>
        </div>

        <div class="wcml_custom_prices_manually_block">
            {% for currency in currencies %}
                <div class="currency_blck">
                    <label>
                        {{ currency.currency_format|raw }}
                    </label>

                    {% if currency.custom_regular_price is empty %}
                        <span class="wcml_no_price_message">{{ strings.det_auto }}</span>
                    {% endif %}

                    {% if is_variation %}
                        <p>
                            <label>{{ strings.regular_price }} ( {{ currency.currency_symbol }} )</label>
                            <input type="{{ currency.wc_input_type|e }}" size="5"
                                   name="_custom_variation_regular_price{{ currency.custom_id }}"
                                   class="wc_input_price wcml_input_price short wcml_regular_price"
                                   value="{{ currency.custom_regular_price }}" step="any" min="0" />
                        </p>

                        <p>
                            <label>{{ strings.sale_price }} ( {{ currency.currency_symbol }} )</label>
                            <input type="{{ currency.wc_input_type|e }}" size="5"
                                   name="_custom_variation_sale_price{{ currency.custom_id }}"
                                   class="wc_input_price wcml_input_price short wcml_sale_price"
                                   value="{{ currency.custom_sale_price }}" step="any" min="0" />
                        </p>
                    {% else %}
                        {{ currency.custom_regular_price_html|raw }}
                        {{ currency.custom_sale_price_html|raw }}
                    {% endif %}

                    <div class="wcml_schedule">
                        <label>{{ strings.schedule }}</label>
                        <div class="wcml_schedule_options">

                            <input type="radio" name="_wcml_schedule[{{ currency.currency_code }}]{{ html_id }}"
                                   id="wcml_schedule_auto[{{ currency.currency_code }}]{{ html_id }}"
                                   value="0"
                                   class="wcml_schedule_input" {{ currency.schedule_auto_checked|raw }} />
                            <label for="wcml_schedule_auto[{{ currency.currency_code }}]{{ html_id }}">{{ strings.same_as_def }}</label>


                            <input type="radio" name="_wcml_schedule[{{ currency.currency_code }}]{{ html_id }}"
                                   value="1"
                                   id="wcml_schedule_manually[{{ currency.currency_code }}]{{ html_id }}"
                                   class="wcml_schedule_input" {{ currency.schedule_man_checked|raw }} />
                            <label for="wcml_schedule_manually[{{ currency.currency_code }}]{{ html_id }}">{{ strings.set_dates }}
                                <span class="block_actions">(
                                    <a href="" class="wcml_schedule_manually_block_show">{{ strings.schedule }}</a>
                                    <a href="" class="wcml_schedule_manually_block_hide">{{ strings.collapse }}</a>
                                )</span>
                            </label>

                            <div class="wcml_schedule_dates">
                                <input type="text" class="short custom_sale_price_dates_from"
                                       name="_custom_sale_price_dates_from{{ currency.custom_id }}"
                                       id="_custom_sale_price_dates_from{{ currency.custom_id }}"
                                       value="{{ currency.custom_sale_price_dates_from|e }}"
                                       placeholder="{{ strings.from|e }} YYYY-MM-DD"
                                       maxlength="10" pattern="[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])" />

                                <input type="text" class="short custom_sale_price_dates_to"
                                       name="_custom_sale_price_dates_to{{ currency.custom_id }}"
                                       id="_custom_sale_price_dates_to{{ currency.custom_id }}"
                                       value="{{ currency.custom_sale_price_dates_to|e }}"
                                       placeholder="{{ strings.to|e }}  YYYY-MM-DD"
                                       maxlength="10" pattern="[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])" />

                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

        <div class="wcml_automaticaly_prices_block">

            {% for currency in currencies %}
                <label>{{ currency.currency_format|raw }}</label>

                {% if is_variation %}
                    <p>
                        <label>{{ strings.regular_price }} ( {{ currency.currency_symbol }} )</label>
                        <input type="number" size="5"
                               name="_readonly_regular_price"
                               class="wc_input_price short"
                               value="{{ currency.regular_price|e }}"
                               step="any" min="0" readonly = "readonly"
                               rel="{{ currency.rate|e }}" />
                    </p>

                    <p>
                        <label>{{ strings.sale_price }} ( {{ currency.currency_symbol }} )</label>
                        <input type="number" size="5"
                               name="_readonly_sale_price"
                               class="wc_input_price short"
                               value="{{ currency.sale_price|e }}"
                               step="any" min="0" readonly = "readonly"
                               rel="{{ currency.rate|e }}" />
                    </p>
                {% else %}
                    {{ currency.regular_price_html|raw }}
                    {{ currency.sale_price_html|raw }}
                {% endif %}
        {% endfor %}
    {% endif %}

    {% if is_variation is empty %}
        <div class="wcml_price_error">{{ strings.enter_price }}</div>
    {% endif %}
</div>

{% if is_variation %}
    </td></tr>
{% endif %}