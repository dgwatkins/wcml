jQuery((function(){jQuery(document).on("click",".wcml_currency_switcher a",wcml_switch_currency_handler)}));var wcml_switch_currency_handler=function(event){if(event.preventDefault(),jQuery(this).is(":disabled")||jQuery(this).parent().hasClass("wcml-cs-active-currency")||jQuery(this).hasClass("wcml-cs-active-currency"))return!1;jQuery(this).off(event),wcml_load_currency(jQuery(this).attr("rel"))};function wcml_load_currency(currency,force_switch){var ajax_loader=jQuery('<img class="wcml-spinner" width="16" heigth="16" src="'+wcml_mc_settings.wcml_spinner+'" />');jQuery(".wcml_currency_switcher").append(ajax_loader),void 0===force_switch&&(force_switch=0),jQuery.ajax({type:"post",url:woocommerce_params.ajax_url,dataType:"json",data:{action:"wcml_switch_currency",currency:currency,force_switch:force_switch,params:window.location.search.substr(1)},success:function(response){if(void 0!==response.error)alert(response.error);else if(void 0!==response.data.prevent_switching)jQuery("body").append(response.data.prevent_switching);else{var target_location=window.location.href;if(-1!==target_location.indexOf("#")||wcml_mc_settings.cache_enabled){var url_dehash=target_location.split("#"),hash=url_dehash.length>1?"#"+url_dehash[1]:"",url_glue=-1!=(target_location=url_dehash[0].replace(/&wcmlc(\=[^&]*)?(?=&|$)|wcmlc(\=[^&]*)?(&|$)/,"").replace(/\?$/,"")).indexOf("?")?"&":"?";target_location+=url_glue+"wcmlc="+currency+hash}wcml_reset_cart_fragments(),target_location=wcml_maybe_adjust_widget_price(target_location,response.data),window.location=target_location}}})}function wcml_maybe_adjust_widget_price(target_location,response){return void 0!==response.min_price&&(target_location=target_location.replace(/(min_price=)(\d+)/,"$1"+response.min_price)),void 0!==response.max_price&&(target_location=target_location.replace(/(max_price=)(\d+)/,"$1"+response.max_price)),target_location}